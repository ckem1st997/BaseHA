<!-- #region Kendo Window -->

<div id="app_window_alert" style="display: none">
    <div class="form fixed-layout-form">
        <form class="form-horizontal">
            <div class="form-body">
                <div class="modal-body">
                    <div class="alert alert-{{Type}}" role="alert">
                        <div class="alerts-content">{{Content}}</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="btn btn-default btn-sm"><i class="fa fa-times"></i> Close</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div id="app_window_confirm" style="display: none">
    <div class="form fixed-layout-form">
        <form class="form-horizontal">
            <div class="form-body">
                <div class="modal-body">
                    <div class="alert alert-{{Type}}" role="alert">
                        <div class="confirms-content">{{Content}}</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" data-action="confirm" class="btn blue btn-sm"><i class="fa fa-check"></i>Xác nhận</button>
                    <button type="button" data-dismiss="modal" class="btn btn-default btn-sm"><i class="fa fa-times"></i>Huỷ bỏ</button>
                </div>
            </div>
        </form>
    </div>
</div>
<div id="app_window_deletes" style="display: none">
    <div class="form fixed-layout-form">
        <form data-form-type="ajax" class="form-horizontal">
            <div class="form-body">
                <div class="modal-body">
                    <div class="alert alert-{{Type}}" role="alert">
                        <div class="deletes-content">{{Content}}</div>
                    </div>
                </div>
                <div class="modal-footer form-actions">
                    <button type="submit" class="btn blue btn-sm">
                        <i class="fa fa-spinner fa-spin spin-submit"></i>
                        <i class="fa fa-check"></i>Xác nhận
                    </button>
                    <button type="button" class="btn btn-default btn-sm" data-dismiss="modal">
                        <i class="fa fa-times"></i>Huỷ bỏ
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- #endregion -->
<!-- #region Ajax-busy -->

<div id="ajax-busy">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
</div>

<!-- #endregion -->

<div id="app_form_antiForgeryToken_container" style="display: none">
    @Html.AntiForgeryToken()
</div>

<script>
    //TODO: XBase Resource
    app.ajax.statusCodeHandler = {
        302: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        400: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        401: function (xhr) {
            if (!app.ajax.handleUnauthorizedRequest(xhr))
                return;
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        403: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        404: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        405: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        406: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        408: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        412: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        500: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        501: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        502: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        503: function (xhr) {
            let msg = xhr.responseJSON.message;
            app.window.alert.open({ title: 'Cảnh báo !', text: msg ? msg : "Lỗi hệ thống, xin vui lòng thử lại !", type: 'danger', options: { width: '40%' } });
        },
        //200: function (xhr) {
        //    let msg = xhr.responseJSON.message;
        //    app.window.alert.open({ title: 'Cảnh báo !', text: 'tt.GetResource("Common.Errors.503")', type: 'success', options: { width: '40%' } });
        //}
    };

    // app.urls
    app.urls.breadcrumb = '@Url.Action("Breadcrumb", "Common")';
    app.urls.sessionExpired = '@Url.Action("SessionExpired", "ClientError")';

    app.form.antiForgeryToken.cookieName = 'AntiForgeryConfig.TokenFieldName';
</script>

<script id="__appInitScript">
    //app.route.appId = parseInt('appContext.CurrentApp.Id');
    //app.route.appType = 'appContext.CurrentApp.AppType';
    //app.route.appAssemblyAreaName = 'ViewContext.RouteData.GetAppAssemblyAreaName()';
    //app.route.areaName = 'ViewContext.RouteData.GetAreaName()';
    //app.route.appControllerName = '(ViewContext.RouteData.GetControllerName() + "Controller")';
    //app.route.appActionName = 'ViewContext.RouteData.GetActionName()';    //app.route.appId = parseInt('appContext.CurrentApp.Id');
    //app.route.appType = 'appContext.CurrentApp.AppType';
    //app.route.appAssemblyAreaName = 'ViewContext.RouteData.GetAppAssemblyAreaName()';
    //app.route.areaName = 'ViewContext.RouteData.GetAreaName()';
    //app.route.appControllerName = '(ViewContext.RouteData.GetControllerName() + "Controller")';
    //app.route.appActionName = 'ViewContext.RouteData.GetActionName()';
</script>

<!-- #region App Templates -->

<script>
    app.templates.grid.bool = function (activate) {
        return activate ? '<i data-action="deactivate" class="fa fa-check green pointer"></i>' : '<i data-action="activate" class="fa fa-lock yellow pointer"></i>';
    }
</script>

<!-- #endregion -->
